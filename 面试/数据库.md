# 数据库笔记

## 事务

### 事务有哪些特性？

原子性： 一个事务的操作，要么全部执行成功，要么全部失败。

一致性：事务执行前后，数据库的状态应保持一致。如果一个事务执行成功，那么数据库应该从一个一致状态转移到另一个一致的状态。

隔离性：多个并发事务之间的执行互不干扰，每个事务的操作对其他事务是隔离的，因此每个事务感觉自己是独立运行的。

持久性：一旦事务被提交，其结果就应该永久保持在数据库中。



### 事务并行可能引发的问题

脏读：读到了另一个事务未提交的修改

不可重复读：一个事务的两次读取结果不一致

幻读：一个事务两次读取得到的数量不一致



### 事务的隔离级别

-   **读未提交（read uncommitted）**，指一个事务还没提交时，它做的变更就能被其他事务看到；
-   **读提交（read committed）**，指一个事务提交之后，它做的变更才能被其他事务看到；
-   **可重复读（repeatable read）**，指一个事务执行过程中看到的数据，一直跟这个事务启动时看到的数据是一致的，**MySQL InnoDB 引擎的默认隔离级别**；
-   **串行化（serializable ）**；会对记录加上读写锁，在多个事务对这条记录进行读写操作时，如果发生了读写冲突的时候，后访问的事务必须等前一个事务执行完成，才能继续执行；



## 索引

###  索引的分类

我们可以按照四个角度来分类索引。

-   按「数据结构」分类：**B+tree索引、Hash索引、Full-text索引**。

-   按「物理存储」分类：**聚集索引（主键索引）、二级索引（辅助索引）**。

    聚集索引保留了一行的原始数据，id为key，原始数据为value，二级索引为属性作为key，id作为value

-   按「字段特性」分类：**主键索引、唯一索引、普通索引、前缀索引**。

-   按「字段个数」分类：**单列索引、联合索引**。



## MySQL 有哪些锁

.全局锁、 表级锁、 行级锁



## MVCC

MVCC（Multi-Version Concurrency Control，多版本并发控制）是一种数据库管理系统中常用的并发控制机制，用于在多个事务并发执行时维护数据的一致性和隔离性。MVCC通过为每个事务创建多个数据版本来实现，每个版本都有一个时间戳，从而在不锁定整个数据集的情况下实现并发。



